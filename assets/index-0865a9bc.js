import{H as d,T as o,s as v,l as O,a as x,D as H,V as b,b as V,r as R,g as D,c as L,S as j,d as z,M as s}from"./index-be92cd97.js";class c{static of(e){return new c(e,!1)}static contentOf(e){return new c(e,!0)}static fromColors(e){return c.createPaletteFromColors(!1,e)}static contentFromColors(e){return c.createPaletteFromColors(!0,e)}static createPaletteFromColors(e,t){const r=new c(t.primary,e);if(t.secondary){const n=new c(t.secondary,e);r.a2=n.a1}if(t.tertiary){const n=new c(t.tertiary,e);r.a3=n.a1}if(t.error){const n=new c(t.error,e);r.error=n.a1}if(t.neutral){const n=new c(t.neutral,e);r.n1=n.n1}if(t.neutralVariant){const n=new c(t.neutralVariant,e);r.n2=n.n2}return r}constructor(e,t){const r=d.fromInt(e),n=r.hue,h=r.chroma;t?(this.a1=o.fromHueAndChroma(n,h),this.a2=o.fromHueAndChroma(n,h/3),this.a3=o.fromHueAndChroma(n+60,h/2),this.n1=o.fromHueAndChroma(n,Math.min(h/12,4)),this.n2=o.fromHueAndChroma(n,Math.min(h/6,8))):(this.a1=o.fromHueAndChroma(n,Math.max(48,h)),this.a2=o.fromHueAndChroma(n,16),this.a3=o.fromHueAndChroma(n+60,24),this.n1=o.fromHueAndChroma(n,4),this.n2=o.fromHueAndChroma(n,8)),this.error=o.fromHueAndChroma(25,84)}}class C{constructor(e){this.input=e,this.hctsByTempCache=[],this.hctsByHueCache=[],this.tempsByHctCache=new Map,this.inputRelativeTemperatureCache=-1,this.complementCache=null}get hctsByTemp(){if(this.hctsByTempCache.length>0)return this.hctsByTempCache;const e=this.hctsByHue.concat([this.input]),t=this.tempsByHct;return e.sort((r,n)=>t.get(r)-t.get(n)),this.hctsByTempCache=e,e}get warmest(){return this.hctsByTemp[this.hctsByTemp.length-1]}get coldest(){return this.hctsByTemp[0]}analogous(e=5,t=12){const r=Math.round(this.input.hue),n=this.hctsByHue[r];let h=this.relativeTemperature(n);const i=[n];let f=0;for(let u=0;u<360;u++){const m=x(r+u),T=this.hctsByHue[m],g=this.relativeTemperature(T),I=Math.abs(g-h);h=g,f+=I}let p=1;const P=f/t;let A=0;for(h=this.relativeTemperature(n);i.length<t;){const u=x(r+p),m=this.hctsByHue[u],T=this.relativeTemperature(m),g=Math.abs(T-h);A+=g;const I=i.length*P;let M=A>=I,F=1;for(;M&&i.length<t;){i.push(m);const E=(i.length+F)*P;M=A>=E,F++}if(h=T,p++,p>360){for(;i.length<t;)i.push(m);break}}const w=[this.input],S=Math.floor((e-1)/2);for(let u=1;u<S+1;u++){let m=0-u;for(;m<0;)m=i.length+m;m>=i.length&&(m=m%i.length),w.splice(0,0,i[m])}const B=e-S-1;for(let u=1;u<B+1;u++){let m=u;for(;m<0;)m=i.length+m;m>=i.length&&(m=m%i.length),w.push(i[m])}return w}get complement(){if(this.complementCache!=null)return this.complementCache;const e=this.coldest.hue,t=this.tempsByHct.get(this.coldest),r=this.warmest.hue,h=this.tempsByHct.get(this.warmest)-t,i=C.isBetween(this.input.hue,e,r),f=i?r:e,p=i?e:r,P=1;let A=1e3,w=this.hctsByHue[Math.round(this.input.hue)];const S=1-this.inputRelativeTemperature;for(let B=0;B<=360;B+=1){const u=v(f+P*B);if(!C.isBetween(u,f,p))continue;const m=this.hctsByHue[Math.round(u)],T=(this.tempsByHct.get(m)-t)/h,g=Math.abs(S-T);g<A&&(A=g,w=m)}return this.complementCache=w,this.complementCache}relativeTemperature(e){const t=this.tempsByHct.get(this.warmest)-this.tempsByHct.get(this.coldest),r=this.tempsByHct.get(e)-this.tempsByHct.get(this.coldest);return t===0?.5:r/t}get inputRelativeTemperature(){return this.inputRelativeTemperatureCache>=0?this.inputRelativeTemperatureCache:(this.inputRelativeTemperatureCache=this.relativeTemperature(this.input),this.inputRelativeTemperatureCache)}get tempsByHct(){if(this.tempsByHctCache.size>0)return this.tempsByHctCache;const e=this.hctsByHue.concat([this.input]),t=new Map;for(const r of e)t.set(r,C.rawTemperature(r));return this.tempsByHctCache=t,t}get hctsByHue(){if(this.hctsByHueCache.length>0)return this.hctsByHueCache;const e=[];for(let t=0;t<=360;t+=1){const r=d.from(t,this.input.chroma,this.input.tone);e.push(r)}return this.hctsByHueCache=e,this.hctsByHueCache}static isBetween(e,t,r){return t<r?t<=e&&e<=r:t<=e||e<=r}static rawTemperature(e){const t=O(e.toInt()),r=v(Math.atan2(t[2],t[1])*180/Math.PI),n=Math.sqrt(t[1]*t[1]+t[2]*t[2]);return-.5+.02*Math.pow(n,1.07)*Math.cos(v(r-50)*Math.PI/180)}}class k extends H{constructor(e,t,r){super({sourceColorArgb:e.toInt(),variant:b.CONTENT,contrastLevel:r,isDark:t,primaryPalette:o.fromHueAndChroma(e.hue,e.chroma),secondaryPalette:o.fromHueAndChroma(e.hue,Math.max(e.chroma-32,e.chroma*.5)),tertiaryPalette:o.fromInt(V.fixIfDisliked(new C(e).analogous(3,6)[2]).toInt()),neutralPalette:o.fromHueAndChroma(e.hue,e.chroma/8),neutralVariantPalette:o.fromHueAndChroma(e.hue,e.chroma/8+4)})}}class q extends H{constructor(e,t,r){super({sourceColorArgb:e.toInt(),variant:b.FIDELITY,contrastLevel:r,isDark:t,primaryPalette:o.fromHueAndChroma(e.hue,e.chroma),secondaryPalette:o.fromHueAndChroma(e.hue,Math.max(e.chroma-32,e.chroma*.5)),tertiaryPalette:o.fromInt(V.fixIfDisliked(new C(e).complement).toInt()),neutralPalette:o.fromHueAndChroma(e.hue,e.chroma/8),neutralVariantPalette:o.fromHueAndChroma(e.hue,e.chroma/8+4)})}}class $ extends H{constructor(e,t,r){super({sourceColorArgb:e.toInt(),variant:b.MONOCHROME,contrastLevel:r,isDark:t,primaryPalette:o.fromHueAndChroma(e.hue,0),secondaryPalette:o.fromHueAndChroma(e.hue,0),tertiaryPalette:o.fromHueAndChroma(e.hue,0),neutralPalette:o.fromHueAndChroma(e.hue,0),neutralVariantPalette:o.fromHueAndChroma(e.hue,0)})}}class N extends H{constructor(e,t,r){super({sourceColorArgb:e.toInt(),variant:b.NEUTRAL,contrastLevel:r,isDark:t,primaryPalette:o.fromHueAndChroma(e.hue,12),secondaryPalette:o.fromHueAndChroma(e.hue,8),tertiaryPalette:o.fromHueAndChroma(e.hue,16),neutralPalette:o.fromHueAndChroma(e.hue,2),neutralVariantPalette:o.fromHueAndChroma(e.hue,2)})}}class U extends H{constructor(e,t,r){super({sourceColorArgb:e.toInt(),variant:b.TONAL_SPOT,contrastLevel:r,isDark:t,primaryPalette:o.fromHueAndChroma(e.hue,36),secondaryPalette:o.fromHueAndChroma(e.hue,16),tertiaryPalette:o.fromHueAndChroma(v(e.hue+60),24),neutralPalette:o.fromHueAndChroma(e.hue,6),neutralVariantPalette:o.fromHueAndChroma(e.hue,8)})}}function W(a){const e=R(a),t=D(a),r=L(a),n=[e.toString(16),t.toString(16),r.toString(16)];for(const[h,i]of n.entries())i.length===1&&(n[h]="0"+i);return"#"+n.join("")}function l(a){a=a.replace("#","");const e=a.length===3,t=a.length===6,r=a.length===8;if(!e&&!t&&!r)throw new Error("unexpected hex "+a);let n=0,h=0,i=0;return e?(n=y(a.slice(0,1).repeat(2)),h=y(a.slice(1,2).repeat(2)),i=y(a.slice(2,3).repeat(2))):t?(n=y(a.slice(0,2)),h=y(a.slice(2,4)),i=y(a.slice(4,6))):r&&(n=y(a.slice(2,4)),h=y(a.slice(4,6)),i=y(a.slice(6,8))),(255<<24|(n&255)<<16|(h&255)<<8|i&255)>>>0}function y(a){return parseInt(a,16)}function Y(a,e,t){var n,h;let r;if(t&&(r=globalThis[t]),r||(r=new CSSStyleSheet,a.adoptedStyleSheets.push(r),t&&(globalThis[t]=r)),r.replaceSync(e),t==="material-theme"){const i=(n=e.match(/--md-sys-color-surface-container:(.+?);/))==null?void 0:n[1];i&&((h=document.querySelector('meta[name="theme-color"]'))==null||h.setAttribute("content",i)),localStorage.setItem(t,e)}}function Q(a,e,t="material-theme"){let r=":root,:host{";for(const[n,h]of Object.entries(e))r+=`--md-sys-color-${n}:${h};`;r+="}",Y(a,r,t)}const G={background:s.background,"on-background":s.onBackground,surface:s.surface,"surface-dim":s.surfaceDim,"surface-bright":s.surfaceBright,"surface-container-lowest":s.surfaceContainerLowest,"surface-container-low":s.surfaceContainerLow,"surface-container":s.surfaceContainer,"surface-container-high":s.surfaceContainerHigh,"surface-container-highest":s.surfaceContainerHighest,"on-surface":s.onSurface,"surface-variant":s.surfaceVariant,"on-surface-variant":s.onSurfaceVariant,"inverse-surface":s.inverseSurface,"inverse-on-surface":s.inverseOnSurface,outline:s.outline,"outline-variant":s.outlineVariant,shadow:s.shadow,scrim:s.scrim,"surface-tint":s.surfaceTint,primary:s.primary,"on-primary":s.onPrimary,"primary-container":s.primaryContainer,"on-primary-container":s.onPrimaryContainer,"inverse-primary":s.inversePrimary,secondary:s.secondary,"on-secondary":s.onSecondary,"secondary-container":s.secondaryContainer,"on-secondary-container":s.onSecondaryContainer,tertiary:s.tertiary,"on-tertiary":s.onTertiary,"tertiary-container":s.tertiaryContainer,"on-tertiary-container":s.onTertiaryContainer,error:s.error,"on-error":s.onError,"error-container":s.errorContainer,"on-error-container":s.onErrorContainer};function X(a,e,t,r){if(typeof a!="string"&&t!=="dynamic"||typeof a!="object"&&t==="dynamic")throw new Error("color / scheme type mismatch");let n;if(t==="tonal")n=new U(d.fromInt(l(a)),e,r);else if(t==="fidelity")n=new q(d.fromInt(l(a)),e,r);else if(t==="vibrant")n=new j(d.fromInt(l(a)),e,r);else if(t==="expressive")n=new z(d.fromInt(l(a)),e,r);else if(t==="content")n=new k(d.fromInt(l(a)),e,r);else if(t==="neutral")n=new N(d.fromInt(l(a)),e,r);else if(t==="monochrome")n=new $(d.fromInt(l(a)),e,r);else if(t==="dynamic"&&typeof a=="object"){const h=l(a.primary),i=c.of(h);if(a.secondary!=="#000000"){const f=l(a.secondary),p=c.of(f);i.a2=p.a1}if(a.tertiary!=="#000000"){const f=l(a.tertiary),p=c.of(f);i.a3=p.a1}if(a.neutral!=="#000000"){const f=l(a.neutral),p=c.of(f);i.n1=p.n1}n=new H({sourceColorArgb:l(a.primary),variant:5,contrastLevel:r,isDark:e,primaryPalette:i.a1,secondaryPalette:i.a2,tertiaryPalette:i.a3,neutralPalette:i.n1,neutralVariantPalette:i.n2})}return J(n)}function J(a){const e={};for(const[t,r]of Object.entries(G))e[t]=W(r.getArgb(a));return e}export{Q as applyTheme,Y as applyThemeString,X as themeFromSourceColor};
